<!doctype html>

<h1>Mountains</h1>

<div id="mountains"></div>

<style>body { min-height: 200px }</style>
<img src="img/cat.png" id="cat" style="position: absolute">
<img src="img/mouse.jpeg" id="mouse" style="position: absolute">

<script>
  const MOUNTAINS = [
    {name: "Kilimanjaro", height: 5895, place: "Tanzania"},
    {name: "Everest", height: 8848, place: "Nepal"},
    {name: "Mount Fuji", height: 3776, place: "Japan"},
    {name: "Vaalserberg", height: 323, place: "Netherlands"},
    {name: "Denali", height: 6168, place: "United States"},
    {name: "Popocatepetl", height: 5465, place: "Mexico"},
    {name: "Mont Blanc", height: 4808, place: "Italy/France"}
  ];

  // Your code here
  function buildTable(data) {
      let table = document.createElement("table"); //Creates the html table element <table></table>

      let fields = Object.keys(data[0]); //get an array of the properties in the first object in the given array, store in fields
      let headRow = document.createElement("tr"); //create a table row element <tr></tr>, store it in headRow
      fields.forEach(function(field) { //for each index in the fields array (mountain's object's properties)
          let headCell = document.createElement("th"); //create a <th> element (for heading cells) for each field, store in headCell
          headCell.appendChild(document.createTextNode(field)); //append <th> with the text of the current index of field
          headRow.appendChild(headCell); //add to the head row (<th>(field text)</th>)
      });
      table.appendChild(headRow); //add the head row to the table (<tr><th>(field text)</th></tr>)

      data.forEach(function(object) { //for each mountain object within the mountains array
          let row = document.createElement("tr"); //create a <tr> element, store it in row
          fields.forEach(function(field) { //for each index in the fields array (mountain's object's properties)
              let cell = document.createElement("td"); //create a <td> element (for regular cells), store in cell
              cell.appendChild(document.createTextNode(object[field])); //appent the <td> with the text content
              if (typeof object[field] == "number") { //if the value is a number
                  cell.style.textAlign = "right"; //style it to the right
              }
              row.appendChild(cell); //add current cell to the row
          });
          table.appendChild(row); //add the current row to the table
      });
      return table; //return the table
      /*outputs raw html formatted like:
      <table>
        <tr>
            <th>name</th>
            <th>height</th>
            <th>place</th>
        </tr>
        <tr>
            <td>mountain info</td>
        </tr>
      </table>
      */
  }
  console.log(buildTable(MOUNTAINS));
  document.querySelector("#mountains") //finds an element with the id mountains
    .appendChild(buildTable(MOUNTAINS)); //builds the table and appends it to the mountains div

//-------------------Elements by Tag Name-------------------//

function elementByTag( node, tagName ) {
    let found = [];
    tagName = tagName.toUpperCase();

    function search(node) {
        for(let i = 0; i < node.childNodes.length; i++) {
            let child = node.childNodes[i];
            if (child.nodeType === document.ELEMENT_NODE) {
                if (child.NodeName === tagName) {
                    found.push(child);
                    search(child);
                }
            }
        }
    }
    search(node);
    return found;
}

//-------------------The Cat's Hat-------------------//

let cat = document.querySelector("#cat");
  let mouse = document.querySelector("#mouse");

  let angle = 0;
  let lastTime = null;
  function animate(time) {
    if (lastTime != null) angle += (time - lastTime) * 0.001;
    lastTime = time;
    cat.style.top = (Math.sin(angle) * 40 + 40) + "px";
    cat.style.left = (Math.cos(angle) * 200 + 230) + "px";

    // Your extensions here.
    mouse.style.top = (Math.sin(angle+Math.PI) * 40 + 40) + "px";
    mouse.style.left = (Math.cos(angle+Math.PI) * 200 + 230) + "px";

    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);

</script>